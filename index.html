<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title id="browser-title"> </title>
    <meta name="description" content="Scrollama: Sticky Side Example" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="scrolly.css" />

    <!-- Scrollama is a library for creating scrollytelling experiences, and depends on intersection observer -->
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama"></script>

    <!-- Leaflet includes for displaying maps -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <!-- PapaParse is a CSV parser -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <script src="leaflet-maps.js"></script>
    <script src="google-sheet.js" type="module"></script>
    <script src="scrolly.js" type="module"></script>

    <!-- DOM Purify ensures user input can't be used for scripting tomfoolery -->
    <script src=" https://cdn.jsdelivr.net/npm/dompurify@3.2.3/dist/purify.min.js "></script>
  </head>

  <body>
    <main>
      <section id="intro">
        <h1 id="story-title">Scrolly Story</h1>
        <p id="subtitle"></p>
      </section>

      <!-- The error dialog is only displayed when there is an error-->
      <section id="error-container">
        <div id="error-dialog">
          <p id="error-header">Dang.</p>
          <p id="error-message"></p>
          <p id="error-action-container">
            Error happened while: <span id="error-action"></span>
          </p>
          <p id="error-hint"></p>
        </div>
      </section>

      <!-- The 'content-section' is just here for reference/example, as it will be entirely replaced 
          by JavaScript generated code containing the content from a data source.

          Multiple scrolly-container divs are necessary because a content-type of "text" can't be
          within a scrolly container, as it uses up the entire horizontal width and does not have
          any sticky content. It will just scroll normally. 

          When we encounter a "text" content type, we need to close the current scrolly-container
          and create a text div. If there's more scrolly content after the text step, 
          then we'll create another scrolly-container after that (and repeat as necessary)
    -->

      <section id="content-section">
        <!-- Below is the first scrolly-container, which will be replaced by JavaScript -->
        <div class="scrolly-container">
          <article>
            <div
              class="step"
              data-step="1"
              data-content-type="image"
              data-file-path="path"
              data-alt-text="Alt Image Text"
              data-zoom-level="1"
            >
              <p class="step-content">Example Image Step</p>
            </div>

            <div
              class="step"
              data-step="2"
              data-content-type="map"
              data-alt-text="Alt Map Text"
              data-latitude="38.794"
              data-longitude="-89.9979"
              data-zoom-level="12"
            >
              <p class="step-content">Example Map Step</p>
            </div>
          </article>

          <!-- Each kind of sticky thing has it's own container to show/hide when it is part of a step-->
          <div class="sticky-container">
            <div class="sticky-content" id="sticky-image-container-1">
              <img id="the-sticky-image" />
            </div>
            <div class="sticky-content" id="sticky-map-container-1"></div>
            <div class="sticky-content" id="sticky-video-container-1"></div>
          </div>
        </div>
      </section>

      <section id="outro">
        <p id="end-text"></p>
      </section>
    </main>
  </body>
</html>
